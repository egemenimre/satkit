# Python CircleCI 2.1 configuration file
version: 2.1

jobs:

  tests:

    docker:
      - image: continuumio/miniconda3

    parallelism: 4

    steps:
      # Get repo from GitHub
      - checkout
      - run:
          name: Install tox
          command: pip install tox
#      # Create venv and install dependencies
#      - run:
#          name: install dependencies
#          command: conda env create -f environment.yml
      - run:
          name: Run tests
          command: tox -e py310

  codestyle:

    docker:
      - image: continuumio/miniconda3

    steps:
      # Get repo from GitHub
      - checkout
      # Create venv and install dependencies
      - run:
          name: Install Python dependencies
          command: pip install tox
      - run:
          name: Make sure style checks pass
          command: tox -e codestyle

workflows:
  tests_and_codestyle:
    jobs:
      - codestyle
      - tests
