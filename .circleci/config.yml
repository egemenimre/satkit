# Python CircleCI 2.1 configuration file
version: 2.1

jobs:
#  build_and_test: # this can be any name you choose
#    executor: python/default # use the default executor defined within the orb
#    steps:
#      - checkout # checkout source code
#      - python/install-packages:
#          pkg-manager: pip
#      - run:
#          name: Run tests
#          command: python -m pytest
#      - persist_to_workspace:
#          root: ~/project
#          paths:
#            - .

  tests:

    docker:
      - image: cimg/python:3.10

#    docker:
#      - image: continuumio/miniconda3
#
#    parallelism: 4

    steps:
      # Get repo from GitHub
      - checkout
      - run:
          name: Install tox
          command: pip install tox tox-conda
      - run:
          name: Run tests
          command: tox -e py310

  codestyle:

    docker:
      - image: continuumio/miniconda3

    steps:
      # Get repo from GitHub
      - checkout
      # Create venv and install dependencies
      - run:
          name: Install Python dependencies
          command: pip install tox tox-conda
      - run:
          name: Make sure style checks pass
          command: tox -e codestyle

workflows:
  tests_and_codestyle:
    jobs:
      - codestyle
#      - tests
